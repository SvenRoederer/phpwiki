<?php // -*-html-*- ?>
<!-- $Id: actionbar.tmpl,v 1.16 2002-01-30 23:41:54 dairiki Exp $ -->
<?php
  if (!$page->get('locked') || $user->isAdmin())
      $EditB = Button("edit",
                      $revision->isCurrent() ? _("Edit") : _("Edit Old Revision"));
  else
      $EditB = Button("viewsource", _("View Source"));

  $s = $Theme->getButtonSeparator();
?>

<!-- I would like not to have to use these tables, and managed to
     get this stuff to work more or less correctly using
     CSSs float:left; and float:right;.  However float:right; seems
     to cause MSIE4.01/NT to hang. 
     So, we use tables...  -->
<table summary="Toolbar 1: Page actions and login."
       class="toolbar" width="100%"
       cellpadding="0" cellspacing="0" border="0"
       id="actionbar">
<tr valign="middle">
  <td>
    <?= $EditB ?> 
    <?php if ($user->isAdmin()) { ?>
     <?=$s?><?= Button($page->get('locked') ? 'unlock' : 'lock') ?>
     <?=$s?><?= Button('remove') ?>
    <?php } ?>
   <?=$s?><?= Button(_("PageHistory")) ?>
   <?=$s?><?= Button('diff') ?> 
   <?=$s?><?= Button(_("DebugInfo")) ?> <!-- For debugging only, really -->
  </td>

  <td align="right">
    <?php if ($user->isSignedIn()) { ?>
      <form method="post" action="<?=BASE_URL?>" accept-charset="<?=CHARSET?>" name="signin">
        <input type="hidden" name="action" value="<?=$request->getArg('action')?>" />
        <input type="hidden" name="pagename" value="HomePage" />
        <!-- This extra table data is required to properly align an image
          -- button next to text. With text-only buttons, it would take up
          -- too much room on small screens to align text this way, so the
          -- default browse template is overridden for this theme.
          -->
	<table cellspacing="0" cellpadding="0" border="0"><tr>
        <td>
          <?=fmt("You are signed in as %s", WikiLink($user->getId(), 'auto'))?>&nbsp;
        </td>
        <td>
          <?=$s?>
	  <?=Button("submit:auth[logout]", _("Sign Out"))?>
        </td>
        </tr></table>
      </form>
    <?php } else { ?>
      <?= Template('signin') ?>
    <?php } ?>
  </td>
</tr></table>
