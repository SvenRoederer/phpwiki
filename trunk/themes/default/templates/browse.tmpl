<!-- -*-html-*- -->
<!-- $Id: browse.tmpl,v 1.2 2002-01-18 06:11:38 carstenklapp Exp $ -->
<?php
  $BF = &$ButtonFactory;

  if (!$page->get('locked') || $user->is_admin())
      $EditB = $BF->makeActionButton("edit",
                                     $IS_CURRENT ? _("Edit") : _("Edit Old Revision"));
  else
      $EditB = $BF->makeActionButton("edit", _("View Source"));

  $LockPageB = $BF->makeActionButton($page->get('locked') ? 'unlock' : 'lock');
  $RemovePageB = $BF->makeActionButton('remove');

  //<?plugin-link PageHistory page="[pagename]" ?>
  $PageHistoryB = $BF->makeActionPageButton(_("PageHistory"));
  $DiffB = $BF->makeActionButton(array('action' => 'diff', 'previous' => 'major'));

  $DebugInfoB = $BF->makeActionPageButton(_("DebugInfo"));

  $SignInB = $BF->makeActionButton($user->is_authenticated() ? 'logout' : 'login');

  $mtime = $Theme->formatDateTime($revision->get('mtime'));
  if ($IS_CURRENT)
      $LastModifiedMsg = sprintf(_("Last edited on %s."), $mtime);
  else
      $LastModifiedMsg = __sprintf("Version %s, saved on %s.",
                                   $VERSION, $mtime);
?>

<div class="br"><br clear="all" class="ignore" /></div>

<?php if (! $IS_CURRENT) { ?>
  <p><strong><?=_("Note:")?></strong>
     <?=_("You are viewing an old revision of this page.")?>
     <a href="<?= WikiURL($page->getName()) ?>"
        ><?=_("View the current version")?></a>.</p>
  <hr class="ignore" noshade="noshade" />
<?php } ?>

<div class="wikitext"><?=$CONTENT?></div>
<hr class="ignore" noshade="noshade" />

<p><?= $LastModifiedMsg ?></p>

<hr noshade="noshade" class="toolbar" />
<!-- I would like not to have to use these tables, and managed to
     get this stuff to work more or less correctly using
     CSSs float:left; and float:right;.  However float:right; seems
     to cause MSIE4.01/NT to hang. 
     So, we use tables...  -->
<? $s = $Theme->buttonSep ?>
<table summary="Toolbar 1: Page actions and search for pages."
       class="toolbar" width="100%"
       cellpadding="0" cellspacing="0" border="0">
<tr valign="baseline">
  <td>
    <?= $EditB ?> 
    <?php if ($user->is_admin()) { ?>
     <?=$s?><?= $LockPageB ?><?=$s?><?= $RemovePageB ?>
    <?php } ?>
   <?=$s?><?= $PageHistoryB ?><?=$s?><?= $DiffB ?> 
   <?=$s?><?= $DebugInfoB ?> <!-- For debugging only, really -->
  </td>
  <td align="right">
    <?php if ($user->is_authenticated()) { ?>
        <?php printf(_("You are signed in as %s"), LinkWikiWord($USERID)); ?> |
    <?php } ?>
    <?= $SignInB ?>
  </td>
</tr></table>

<div class="toolbar">
</div>

<!-- RELATEDPAGES were here. -->
